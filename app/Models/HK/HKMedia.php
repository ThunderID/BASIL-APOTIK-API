<?php

namespace App\Models\HK;

use Illuminate\Database\Eloquent\Model;

use App\Room;
use App\User;

class HKMedia extends Model
{
    // --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	// TRAITS
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	// VARIABLES
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	protected $table  = 'hk_medias';
	protected $fillable = [
		'room_id',
		'room_status_id',
		'user_id',
		'date',
		'photos',
		'note',
		'location',
	];

	public $timestamps = true;

	protected $hidden = [
	];

	protected $casts = [
		'photos'	=> 'array'
	];

	protected $dates = [
		'date',
		'deleted_at'
	];

	protected $touches = [
	];

	protected $observables = [
	];

	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	// CONFIGURATIONS
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	// BOOT
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	// CONSTRUCT
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	// RELATIONSHIP
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	public function room()
	{
		return $this->belongsTo(Room::class, 'room_id');
	}

	public function user()
	{
		return $this->belongsTo(User::class, 'user_id');
	}

	public function room_status()
	{
		return $this->belongsTo(RoomStatus::class, 'room_status_id');
	}
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	// BOOT
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	// STATIC FUNCTION
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	// FUNCTION
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	public function getRules()
	{
		$rules['room_id']            = ['nullable', 'exists:'. app()->make(Room::class)->getTable() . ',id'];
		$rules['room_status_id']	 = ['nullable', 'exists:'. app()->make(RoomStatus::class)->getTable() . ',id'];
		$rules['user_id']            = ['required', 'exists:'. app()->make(User::class)->getTable() . ',id'];
		$rules['date'] 				 = ['required', 'date', 'after:created_at'];
		$rules['photos']             = ['required', 'array'];
		$rules['photos.*']		 	 = ['required', 'string', 'url'];
		$rules['note']             	 = ['nullable', 'string'];
		$rules['location']           = ['nullable', 'string'];
		
		return $rules;
	}
	
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	// ACCESSOR
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	// MUTATOR
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	// QUERY
	// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
}
